<template>
  <div id="register">
    <div>
      <img src="../assets/loginAccount.png" alt="" />
    </div>
    <h1>CREATE YOUR ACCOUNT</h1>
    <form
      novalidate
      id="form"
      action="#"
      method="post"
      @submit.prevent="checkForm"
    >
    <div>
      <div id="field-1">
        <label  for="">
          <span > First Name </span>
          <input
            id="firstName"
            type="text"
            name="firstName"
            v-model="firstName"
            @blur="blurElement"
            @focus="focusElement"
            autocomplete="off"
            required
            :class = "{'focus':esActivateFocus,
                       'blur':esActivateBlur}"
          />
        </label>
        <span></span>
      </div>


    <div id="field-2">
        <label  for="">
          <span > Last Name </span>
          <input @focus="focusElement"
          id="lastName"
          type="text"
          name="lastName"
          v-model="lastName"
          placeholder="Last Name"
          required
           />
        </label>
        <span></span>
    </div>
      <input
        id="email"
        type="email"
        name="email"
        v-model="email"
        placeholder="Username or Email Address"
        required
      />
    
  

      <input
        id="displayName"
        type="text"
        name="displayName"
        v-model="displayName"
        placeholder="Display Name"
      />
      <span class="textDisplayName"
        >New display names need to be approved. Until then, you'll see a
        temporary display name.</span
      >

      <input
        id="password"
        type="password"
        name="password"
        autocomplete="on"
        v-model="password"
        placeholder="Password"
        required
      />
      <div class="text-check">
        <label class="checkbox">
          <input class="me-1" type="checkbox" />Show password
        </label>
      </div>
          </div>


      <div class="text-check">
        <label>
          <input class="me-1" type="checkbox" v-model="offers" /> Yes! I would
          like to receive by email special offers and updates about Lucasfilm
          Ltd. and other products and services from The Walt Disney Family of
          Companies.
        </label>
      </div>

      <p class="termAccept">
        By creating an account, you agree to our Terms of Use and acknowledge
        that you have read our Privacy Policy, Cookies Policy and EU Privacy
        Rights. More...
      </p>
      <p class="termAccept">My home country/region: Spain. Change.</p>
      <input type="submit" value="Create Account" />

      <p>
        <a href="" @click="goLogin">Already have an account? Sign In</a>
      </p>
    </form>
  </div>
</template>
<script>
export default {
  name: "Register",
  data() {
    return {
      esActivateFocus:false,
      esActivateBlur:false,
      contador:10,
      email: "",
      password: "",
      firstName: "",
      lastName: "",
      offers: "",
      displayName: "",

      dataPerson: {
        firstName: "",
        lastName: "",
        email: "",
        password: "",
        offers: "",
        displayName: "false",
      },
    };
  },
  methods: {
    goLogin() {
      this.$router.push({ name: "Login" });
    },
    initEventVariables(){
     this.esActivateBlur = false;
     this.esActivateFocus= false;
    },
    blurElement(e) {
      console.log('blur');  
      this.initEventVariables();
       if (e.target.id.innerHTML === undefined)
         {
         this.esActivateBlur = true;
         e.target.classList.add("blur");

         }
    },
    focusElement(){
         console.log('focus');
         this.initEventVariables();
         this.esActivateFocus = true;
    },
    guardarLocalStorage: function () {
      // event.preventDefault();
      this.dataPerson.email = this.email;
      this.dataPerson.password = this.password;
      this.dataPerson.firstName = this.firstName;
      this.dataPerson.firstName = this.lastName;
      this.dataPerson.offers = this.offers;
      this.dataPerson.displayName = false;

      localStorage.setItem("usuario", JSON.stringify(this.dataPerson));
    },
    
    checkForm: function (e) {
      this.errors = [];

      if (!this.firstName || /^\s+$/.test(this.firstName)) {
        console.log("Hola");
        this.errors.push("El First Name es obligatorio.");
      }
      if (!this.lastName) {
        this.errors.push("El Last Name es obligatorio.");
      }
      if (!this.email) {
        this.errors.push("El correo electrónico es obligatorio.");
      } else if (!this.validEmail(this.email)) {
        this.errors.push("El correo electrónico debe ser válido.");
      }

      if (!this.errors.length) {
        this.guardarLocalStorage();
        return true;
      }
      alert("Por favor Revise su datos");
      e.preventDefault();
    },
    validEmail: function (email) {
      var re =
        /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      return re.test(email);
    },
  },
};
</script>
<style>
/* #login div,
#login h1,
#login input,
#login a{

} */
#register {
  font-family: "DIN Next W01 Light";
  margin-top: 100px;
  padding-bottom: 40px;
  background-color: #181818;
  min-width: 440px;
  min-height: 100vh;
  width: 410px;
  margin: 0 auto;
  font-size: 12px;
  margin-top: 40px;
}
#register * {
  letter-spacing: .06em;
}

form > * {
  margin: 0 auto;
}
#register img {
  width: 322px;
  height: 60px;
}
#register > form > *,
#register .text-check {
  width: 350px;
}
#register .text-check,
.termAccept {
  display: block;
  text-align: left;
  color: #aaa;
  padding-left: 0px;
  padding-right: 0px;
}
/*#register label,*/
#register input[type="checkbox"] {
  display: inline-block;
}
#register input:not([type="checkbox"]){
  margin-bottom:1rem;
}
/* #register>form>input:not([type="checkbox"]):not([type="radio"]):active{ */


#register > form > button {
  font-size: 1.1rem;
  display: block;
  border: 1px solid #d8dee8;
  box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%);
  margin-bottom: 1rem;
}

#register button {
  background-color: #484848;
  font-size: 1.5em;
}
#remember-container {
  text-align: right;
  font-size: 1.25em;
}
.textDisplayName {
  color: #abb0b8;
  display: block;
  padding-top: 7px;
  text-align: justify;
}
#register h1 {
  font-size: 1.4rem;
  margin-bottom: 1.3rem;
  text-transform: uppercase;
  color: #edd700;
  text-align: center;
}
/**FIELD-1 */
#field-1>label{
  display: block;
  /* border:2px solid #edd700; */
  box-sizing: border-box;
  position:relative;
  background: white;
  width: 100%;
  border:none
}

#field-1>label>input{
  display:block;
  background: transparent;
  outline:none;
  width: 100%;
  padding:5px 5px;
  /* border:none; */
    border:2px solid #edd700;


}
#field-1>label>span{
  position:absolute;
  color:#aaa;
  top:5px;
  left:5px ;
}
#field-1>label>span,
#field-1>label>#input{
  padding:0;
}

/*FIELD-1 ONFOCUS*/
/*#field-1>label*/
#field-1>label>input.focus{
  background: #abb0b8;
}
#field-1>label.focus{
 color:#abb0b8;
 border-color: #edd700;
}

#field-1>label>input.blur{
  background: white;
}
#field-1>label>.blur{
  border-color: red;

}

.textError{
  border:none;
  color:red;
  background-color:#484848;
}

</style>